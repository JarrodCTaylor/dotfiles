# Source the prompt
if [[ ! -n "$ZSHRUN" ]]; then
    source $HOME/.zsh_prompt
fi

# Precmd functions
local -a precmd_functions
precmd_functions=( precmd_prompt )

# General Settings

# Autoload tab completion <<2
autoload -U compinit
compinit -C

# Modify default zsh directory coloring on ls commands <<2
export LSCOLORS=gxfxcxdxbxegedabagacad

zstyle ':completion:*' matcher-list 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=*' 'l:|=* r:|=*'
zstyle ':completion:*' list-colors "$LS_COLORS"
zstyle -e ':completion:*:(ssh|scp|sshfs|ping|telnet|nc|rsync):*' hosts '
    reply=( ${=${${(M)${(f)"$(<~/.ssh/config)"}:#Host*}#Host }:#*\**} )'

# Set the desired setup options

setopt  auto_cd
setopt  auto_pushd
setopt  noclobber
setopt  complete_aliases
setopt  extended_glob
setopt  hist_ignore_all_dups
setopt  hist_ignore_space
setopt  share_history
setopt  noflowcontrol
setopt  list_types
setopt  mark_dirs
setopt  path_dirs
setopt  prompt_percent
setopt  prompt_subst

# History settings
HISTFILE=$HOME/.zsh_history
HISTFILESIZE=65536  # search this with `grep | sort -u`
HISTSIZE=4096
SAVEHIST=4096
REPORTTIME=60       # Report time statistics for progs that take more than a minute to run

export LANG=en_US.UTF-8
export LC_ALL=$LANG
export LC_COLLATE=C
export GREP_OPTIONS='--color=auto'
export EDITOR='vim'
export VISUAL='vim'
export GIT_EDITOR=$EDITOR
export LESS='-imJMWR'
export PAGER="less $LESS"
export MANPAGER=$PAGER
export GIT_PAGER=$PAGER
export BROWSER='chromium-browser'

# Set grepoptions
export GREP_OPTIONS='--color=auto'

# Use the correct ctags

PATH="~/.pyenv/shims:/usr/local/bin:$PATH"

# Editor and display configurations

export EDITOR='vim'
export VISUAL='vim'
export GIT_EDITOR=$EDITOR
export LESS='-imJMWR'
export PAGER="less $LESS"
export MANPAGER=$PAGER
export GIT_PAGER=$PAGER
export BROWSER='chromium-browser'

# Eliminate lag between transition from normal/insert mode
export KEYTIMEOUT=1

# Key Bindings
# Set vi-mode and create a few additional Vim-like mappings
bindkey -v
bindkey '^R' history-incremental-search-backward
bindkey '^R' history-incremental-pattern-search-backward
bindkey '^?' backward-delete-char
bindkey '^H' backward-delete-char


if [ "$(uname)" = "Darwin" ]; then
    alias ls='ls -FHG'
else
    alias ls='ls -F --color'
fi

source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
for fname in $(find ~/dotfiles/default-configs -name "*.sh*"); do
    source $fname
done

for fname in $(find ~/dotfiles/custom-configs -name "*.sh*"); do
    source $fname
done




# Aliases
if [ "$(uname)" = "Darwin" ]; then
    alias ls='ls -FHG'
else
    alias ls='ls -F --color'
fi

# Source Syntaxhighlighting
source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# Source Default Configurations
for fname in $(find ~/dotfiles/default-configs -name "*.sh*"); do
    source $fname
done

# Source Custom Configurations
for fname in $(find ~/dotfiles/custom-configs -name "*.sh*"); do
    source $fname
done

export ZSH="/Users/poginni/.oh-my-zsh"
ZSH_THEME="rixius"


# Nvim
alias n='nvim'

# Python
alias p='python'
alias pp='python -mjson.tool'

# Tmux
alias t='tmux new -s ${1}' # New named session
alias t del='tmux kill-session -t ${1}' # Kill named session

# FZF
alias f='nvim $(fzf)'
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Docker
alias dp='docker prune -a'
alias dc='docker system prune -a && docker volume prune'
alias dr='docker run -it ${1} /bin/bash'
alias de='docker exec -it ${1} /bin/bash'

# Terraform
alias ta="terraform apply"
alias td="terraform destroy"
alias ti="terraform init"

# Shell autocomplete
autoload -U +X bashcompinit && bashcompinit
complete -o nospace -C /usr/local/bin/vault vault

export NVM_DIR='$HOME/.nvm'
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
alias tp="terraform plan"
